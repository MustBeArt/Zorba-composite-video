# Zorba Composite Video Adapter Board

2023-02-17 Paul Williamson

After I was given a Zorba Portable Computer, I was pleased to discover the archives maintained by the Zorba Equipment Preservation Society (ZEPS) at [http://zorba.z80.de](http://zorba.z80.de). They even had scans of [schematic diagrams](http://zorba.z80.de/telcon.htm) ([local zip file](zorba-schematics-from-zorba.z80.de.zip)) of the hardware. My machine had a feature that didn't appear on the schematics: an unlabeled RCA jack squeezed between the printer and comm ports on the rear panel. The RCA jack was also visible in a [photo](http://www.zorba.z80.de/images/Modcomp.Zorba.RearSide.1.jpg) in the ZEPS gallery, so I knew it wasn't unique to my Zorba. It was a composite video output, which seems to have been added to Telcon's design by Modular Micros. I decided to document it.

Jump to:

* [Official Documentation](Official-Documentation)
* [Reading the Main Board Schematic](Reading-the-Main-Board-Schematic)
* [Installation on the Main Board](Installation-on-the-Main-Board)
* [A Close Look at the Composite Video Board](A-Close-Look-at-the-Composite-Video-Board)
* [Reverse-Engineered Schematic Diagram](Reverse-Engineered-Schematic-Diagram)
* [Observing the Circuit Behavior](Observing-the-Circuit-Behavior)
* [Using the Composite Output](Using-the-Composite-Output)

## Official Documentation

Here's all the official documentation I found: one loose page in the front pocket of the user manual's binder, which I was fortunate to receive with the computer.

![One sheet of documentation](/composite%20adapter%20manual%20supplement.png)

Note the disclaimer that "This feature ... will not operate with all monitors...", suggesting that the output signal may not be entirely compliant with standards for composite video.

## Reading the Main Board Schematic

The RCA jack is connected to a small add-on board that plugs into connector P5 on the Zorba's main board. The schematics from the ZEPS archive show P5, labeled "COMP. VIDEO BOARD OPTION", at B2 on [sheet 2](http://zorba.z80.de/files/telcon/315100166-2.pdf).

![B2 on sheet 2](/P5-on-schematic.png)

They also show a signal named `14.3 MHZ` from P5 pin 4 driving the clock inputs of the pixel generating circuitry, U2 and U4, at D5 on the same sheet.

![D5 on sheet 2](/P5-4-on-schematic.png)

From this I conclude that the schematic shows the main board with the updates needed to work with the composite video board already incorporated. In fact, as drawn, it *requires* the composite video board. My main board is marked Revision F, and has a trace cut and a jumper added to match the schematic. Without that cut and jumper, the video circuitry would be clocked by the `12.0 MHZ` signal generated by U43 from the main system 24MHz oscillator. There is no hint about this possibility on the schematics, except that the `12.0 MHZ` signal generated there seems not to be used anywhere.

# Installation on the Main Board

Here is a view of the main board with the composite video board installed. The square off-white board in the lower right is the composite video board, and you can make out the black coaxial cable running from the left edge of the composite video board to the RCA jack on the rear panel. At the lower right corner of the composite video board, you can see the solder side of the 2x4 female pin header that connects to P5 on the main board. The connector P4 immediately below that goes to the system's main video board (and to the power supply).

![Main board top](/mainboard%20top.png)

Here is the bottom of the main board. The cut and the jumper are circled in pink. The other red wires (below the Philips-head screw toward the left) seem to be associated with an independent change of the 24 MHz oscillator from a crystal at Y1 (here, unpopulated) to an integrated oscillator (here, piggybacked on top of U55).

![Main board bottom](/mainboard%20bottom%20cut%20and%20jumper.png)

Here's a close-up of the modifications on the main board. The red jumper wire carries the 14.31818 MHz clock from pin 4 of P5 (a 2x4 pin header) to pin 2 of U2. A trace on the top of the board (not shown) connects U2-2 to U4-7. The cut interrupts a long trace that originally connected the `12.0 MHZ` clock signal from U43 to U4-7.

![Main board cut and jumper magnified](/cut%20and%20jumper%20closeup.png)

## A Close Look at the Composite Video Board

Here's the top of the composite video board. You can see the solder side of the connector at the upper left, just above a 14.31818 MHz clock oscillator in a DIP-14 metal can package. 14.31818 MHz is the magic frequency that can generate all the standard clocks and frequencies needed for NTSC-compliant video. Below the MODCOMP logo is IC3, a 74LS123N monostable multivibrator, and below that are the resistor (12K) and the capacitor (1500pF) that set its pulse width at 5µs nominal. Below the oscillator are IC1, a 74LS00 quad nand gate, and IC2, a 74LS175N quad D-type flip-flop. Transistor Q1, a common 2N3904, drives the coaxial cable soldered directly to the board.

![Photo of composite video board, top](/composite%20board%20top.png)

Here's the bottom of the composite video board. You can see the connector at the upper right, and an extra bypass capacitor between power and ground on IC3.

![Photo of composite video board, bottom](/composite%20board%20bottom.png)

## Reverse-Engineered Schematic Diagram

Here's a schematic diagram I created in [KiCad 7](https://www.kicad.org) by inspection of the board. Bypass capacitors are omitted. You can also download the [KiCad project](/Zorba%20composite%20adapter/) or a [PDF of the schematic](/Zorba%20composite%20adapter.pdf).

![Schematic diagram](/Zorba%20composite%20adapter.png)

The 14.31818 MHz clock is not used on the composite video board. It just goes to the connector for use on the main board.

Besides +5V power and ground, three signals come from the video circuitry on the main board: `HORIZ`, `VERT`, and `VIDEO`. These are exactly the same signals that are fed to the system's main video board, which drives in the internal monitor. Modified versions of these three signals are combined with diodes and the combined signal drives the base of transistor Q1, which in turn drives the output composite signal down coaxial cable to the RCA connector.

The main signal `VIDEO` is passed through largely unmodified. It goes through an extra diode, presumably for a bit of voltage drop.

The horizontal sync signal `HORIZ` is processed by IC3, the 74LS123 monostable multivibrator, which is set by a resistor and a capacitor to a pulse duration of 5 µs nominal (I measured 6.5 µs actual). As a result, the pulses are inverted and slightly shortened.

The vertical sync signal `VERT` is processed by IC2, the 74LS175 quad D-type flip-flop, with some help from IC1, the 74LS00 quad NAND gate. `VERT` is inverted by a NAND gate and then passes through three of the flip-flops. `HORIZ` is inverted by another NAND gate and used to clock the flip-flops. The inverting output of the third flip-flop is then combined with the inverted `VERT` by another NAND gate, creating a non-inverted pulse that's shortened to two periods of the `HORIZ` pulse train plus one duration of an (unshortened) `HORIZ` pulse.

The other half of the 74LS123, the fourth NAND gate in the 74LS00, and the fourth flip-flop in the 74LS175 are unused and left unconnected.

## Observing the Circuit Behavior

I connected a Saleae Logic Pro 16 logic analyzer with analog capture to selected signals on the composite video board. Here's a photo of the capture setup.

![Logic analyzer hookup photo](/signal%20capture%20setup.png)

The main board has been pulled slightly out of the chassis to provide access. Everything remains connected except the floppy drive ribbon cable, which was too short. The chip clip is on IC1, the 74LS00, and individual clips are connected to signals not available on the 74LS00. A video monitor is connected to the RCA jack (not shown).

Here's a screen shot of the signals captured by the logic analyzer, using Saleae's Logic 2 application.

![Logic analyzer screen shot](/waveforms.png)

The top five signals are digital captures. The remaining signals are over-sampled analog captures. The signals labeled `HORIZ`, `VERT`, and `VIDEO IN` are the input signals on the connector. The signal labeled `COMPOSITE` is the output on the RCA jack. `IC3-4` is pin 4 of IC3, which is the output of the horizontal pulse shortener. `Q2/` is pin 11 of IC2, the thrice-delayed version of `VERT`. `base of Q1` is the input to the transistor driving the `COMPOSITE` output.

By comparing the third, fourth, and fifth rows of the capture, you can see that `Q2/` is indeed just a delayed version of `VERT`, and that `IC1-6` is a shortened version of the vertical sync pulse with width equal to the delay between `VERT` and `Q2/`.

If you look at the vertical scale calibration on the left end of each analog waveform, you can see that `HORIZ` and `VERT` are fairly clean TTL signals, with high just below 4V and low very close to 0V.

Examining `VIDEO IN`, you can see that the sync pulses are close to 0V, the black level is around 0.28V, and the illuminated pixels reach two distinct voltages, around 0.4V and 0.55V. The values depend on the setting of the front panel Contrast knob. The lower value is the normal brightness, and the higher value is the *highlight* brightness.

Comparing the `COMPOSITE` output to the `VIDEO IN` signal, you'll notice that very little has changed. Neither of the pulse shorteners has much of an effect on the width of the pulses in the output. The main differences are voltage levels. The black level is up to around 1.0V, and the active pixels are higher than that, which is perhaps higher than they should be. None of the sync pulses gets very close to 0V, as they are supposed to do. There are three different voltages reached by the sync pulses: around 0.4V during most of the vertical pulse, around 0.3V during the three horizontal pulses that occur during the vertical pulse, and somewhere in between for other horizontal pulses. Perhaps the lowest-voltage pulses during the vertical sync make it possible for some monitors to lock on to the signal, even if it isn't correct according to the standard.

## Using the Composite Output

As the one-sheet documentation warned, I've had difficulty using this signal with some monitors. A variety of inexpensive LCD monitors with composite A/V inputs were all unable to recognize the signal. An inexpensive Sanyo DM2112 monochrome CRT monitor from 1982 was able to display the signal, after some fairly radical adjustments to the horizontal hold and vertical hold knobs. I bought the Sanyo new back in the day for use with Commodore computers. It just happens to be on the compatibility list from Modular Micros.

My eventual goal is to convert the display output to HDMI, so it can be used as an input for video production. I believe there are converters available that can be configured to accept the timing of this non-standard composite signal and distinguish the two non-black video levels. It might be easier to start from digital signals available on the main board.

I find it odd that the composite output depends on the position of the Zorba's front panel Contrast knob. This is probably a consequence of the composite output feature being a retrofit. It would be preferable if the composite output voltages were consistent and independent of the Contrast knob setting, so that an external monitor or converter circuit could be adjusted once to work with known voltages. As a bonus, that would make it possible to turn the Contrast all the way down and save the built-in CRT while using an external monitor.

An even better way to save the built-in CRT would be to disable the internal video circuits entirely. This would also eliminate the annoying high-pitched whine that is audible to younger people. Simply interrupting the +12V supply to the main video board from pin 9 of connector P4 should do the trick. This could be as simple as a toggle switch or as fancy as a software-controlled relay or FET switch.

